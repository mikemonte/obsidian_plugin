let  nutritionalInformationFrontMatter = {
	"1": {
		"name": "energy",
		"amount": "0"
	},
	"2": {
		"name": "protein",
		"amount": "24.6"
	},
	"3": {
		"1": {
			"name": "fiber",
			"amount": "50"
		},
		"2": {
			"1": {
				"name": "glucose",
				"amount": "7"
			},
			"2": {
				"name": "fructose",
				"amount": "0"
			},
			"3": {
				"name": "sucrose",
				"amount": "50"
			},
			"4": {
				"name": "lactose",
				"amount": "0"
			},
			"5": {
				"name": "maltose",
				"amount": "0"
			},
			"6": {
				"name": "galactose",
				"amount": "0"
			},
			"name": "sugars",
			"amount": "40"
		},
		"3": {
			"name": "starch",
			"amount": "0"
		},
		"name": "carbohydrates",
		"amount": "4"
	},
	"4": {
		"1": {
			"name": "saturates",
			"amount": "4.06"
		},
		"2": {
			"name": "butanoic_acid",
			"amount": "0"
		},
		"3": {
			"name": "decanoic_acid",
			"amount": "0"
		},
		"4": {
			"name": "dodecanoic_acid",
			"amount": "0"
		},
		"5": {
			"name": "hexadecanoic_acid",
			"amount": "3.555"
		},
		"6": {
			"name": "hexanoic_acid",
			"amount": "0"
		},
		"7": {
			"name": "octadecanoic_acid",
			"amount": "0.293"
		},
		"8": {
			"name": "octanoic_acid",
			"amount": "0"
		},
		"9": {
			"name": "tetradecanoic_acid",
			"amount": "0.212"
		},
		"10": {
			"name": "monounsaturated",
			"amount": "4.631"
		},
		"11": {
			"name": "docosenoic_acid",
			"amount": "0.114"
		},
		"12": {
			"name": "eicosenoic_acid",
			"amount": "0.3"
		},
		"13": {
			"name": "hexadecenoic_acid",
			"amount": "1.043"
		},
		"14": {
			"name": "octadecenoic_acid",
			"amount": "3.165"
		},
		"15": {
			"name": "polyunsaturated",
			"amount": "7.405"
		},
		"16": {
			"name": "dha",
			"amount": "0"
		},
		"17": {
			"name": "dpa",
			"amount": "0"
		},
		"18": {
			"name": "epa",
			"amount": "0"
		},
		"19": {
			"name": "eicosatetraenoic_acid",
			"amount": "0.5"
		},
		"20": {
			"name": "octadecadienoic_acid",
			"amount": "0.081"
		},
		"21": {
			"name": "octadecatetraenoic_acid",
			"amount": "0.033"
		},
		"22": {
			"name": "octadecatrienoic_acid",
			"amount": "0.017"
		},
		"23": {
			"name": "linoleic_acid",
			"amount": "0"
		},
		"24": {
			"name": "omega-3",
			"amount": "0"
		},
		"25": {
			"name": "omega-6",
			"amount": "0"
		},
		"26": {
			"name": "transfats",
			"amount": "0"
		},
		"name": "fat",
		"amount": "17.9"
	},
	"5": {
		"name": "water",
		"amount": "0"
	},
	"6": {
		"1": {
			"name": "vitamin_a",
			"amount": "0"
		},
		"2": {
			"name": "vitamin_b1",
			"amount": "0"
		},
		"3": {
			"name": "vitamin_b2",
			"amount": "0"
		},
		"4": {
			"name": "vitamin_b3",
			"amount": "0"
		},
		"5": {
			"name": "vitamin_b5",
			"amount": "0"
		},
		"6": {
			"name": "vitamin_b6",
			"amount": "0"
		},
		"7": {
			"name": "vitamin_b7",
			"amount": "0"
		},
		"8": {
			"name": "vitamin_b9",
			"amount": "0"
		},
		"9": {
			"name": "vitamin_b12",
			"amount": "0"
		},
		"10": {
			"name": "vitamin_c",
			"amount": "0"
		},
		"11": {
			"name": "vitamin_d2",
			"amount": "0"
		},
		"12": {
			"name": "vitamin_d3",
			"amount": "0"
		},
		"13": {
			"name": "vitamin_e",
			"amount": "0"
		},
		"14": {
			"name": "vitamin_k1",
			"amount": "0"
		},
		"15": {
			"name": "vitamin_k2",
			"amount": "0"
		},
		"name": "vitamins",
		"amount": "0"
	},
	"7": {
		"1": {
			"name": "betaine",
			"amount": "0"
		},
		"2": {
			"name": "bicarbonate",
			"amount": "0"
		},
		"3": {
			"name": "boron",
			"amount": "0"
		},
		"4": {
			"name": "bromine",
			"amount": "0"
		},
		"5": {
			"name": "caffeine",
			"amount": "0"
		},
		"6": {
			"name": "calcium",
			"amount": "0.275"
		},
		"7": {
			"name": "copper",
			"amount": "0"
		},
		"8": {
			"name": "choline",
			"amount": "0.49"
		},
		"9": {
			"name": "chloride",
			"amount": "0"
		},
		"10": {
			"name": "chromium",
			"amount": "0"
		},
		"11": {
			"name": "iodine",
			"amount": "0"
		},
		"12": {
			"name": "iron",
			"amount": "0.01188"
		},
		"13": {
			"name": "flouride",
			"amount": "0"
		},
		"14": {
			"name": "lutein",
			"amount": "0"
		},
		"15": {
			"name": "lycopene",
			"amount": "0"
		},
		"16": {
			"name": "magnesium",
			"amount": "0.3"
		},
		"17": {
			"name": "manganese",
			"amount": "0"
		},
		"18": {
			"name": "molybdenum",
			"amount": "0"
		},
		"19": {
			"name": "nitrate",
			"amount": "0"
		},
		"20": {
			"name": "potassium",
			"amount": "0.181"
		},
		"21": {
			"name": "phosphate",
			"amount": "0"
		},
		"22": {
			"name": "phosphorus",
			"amount": "0.356"
		},
		"23": {
			"name": "selenium",
			"amount": "0"
		},
		"24": {
			"name": "sodium",
			"amount": "1.5"
		},
		"25": {
			"name": "sulphate",
			"amount": "0"
		},
		"26": {
			"name": "theobromine",
			"amount": "0"
		},
		"27": {
			"name": "zinc",
			"amount": "0"
		},
		"28": {
			"name": "zeaxanthin",
			"amount": "0"
		},
		"name": "minerals",
		"amount": "0"
	},
	"8": {
		"1": {
			"name": "arginine",
			"amount": "1.59"
		},
		"2": {
			"name": "aspartic acid",
			"amount": "0"
		},
		"3": {
			"name": "cysteine",
			"amount": "0"
		},
		"4": {
			"name": "cystine",
			"amount": "0.449"
		},
		"5": {
			"name": "glutamic acid",
			"amount": "0"
		},
		"6": {
			"name": "glycine",
			"amount": "0.74"
		},
		"7": {
			"name": "histidine",
			"amount": "0.649"
		},
		"8": {
			"name": "isoleucine",
			"amount": "1.035"
		},
		"9": {
			"name": "leucine",
			"amount": "2.133"
		},
		"10": {
			"name": "lysine",
			"amount": "1.834"
		},
		"11": {
			"name": "methionine",
			"amount": "0.646"
		},
		"12": {
			"name": "phenylalanine",
			"amount": "2.039"
		},
		"13": {
			"name": "proline",
			"amount": "1.2"
		},
		"14": {
			"name": "serine",
			"amount": "1.897"
		},
		"15": {
			"name": "threonine",
			"amount": "1.263"
		},
		"16": {
			"name": "tryptophan",
			"amount": "0.323"
		},
		"17": {
			"name": "tyrosine",
			"amount": "0.968"
		},
		"18": {
			"name": "valine",
			"amount": "1.263"
		},
		"name": "amino acids",
		"amount": "0"
	},
	"9": {
		"1": {
			"name": "cholesterol",
			"amount": "0"
		},
		"2": {
			"name": "phytosterols",
			"amount": "0"
		},
		"name": "sterols",
		"amount": "0"
	}
}


nutritionalInformationFrontMatter = {
	"1": {
		"name": "energy",
		"amount": "0"
	},
	"2": {
		"name": "protein",
		"amount": "24.6"
	},
	"3": {
		"1": {
			"name": "fiber",
			"amount": "50"
		},
		"2": {
			"1": {
				"name": "glucose",
				"amount": "7"
			},
			"2": {
				"name": "fructose",
				"amount": "0"
			},
			"3": {
				"name": "sucrose",
				"amount": "50"
			},
			"name": "sugars",
			"amount": "40"
		}
	}
}


let nutritionData = {
	"energy": "264",
	"carbohydrates": "4",
	"fiber": "0",
	"sugars": "0",
	"net_carbs": "4",
	"fat": "17.9",
	"saturates": "4.06",
	"butanoic_acid": "0",
	"decanoic_acid": "0",
	"dodecanoic_acid": "0",
	"hexadecanoic_acid": "3.555",
	"hexanoic_acid": "0",
	"octadecanoic_acid": "0.293",
	"octanoic_acid": "0",
	"tetradecanoic_acid": "0.212",
	"monounsaturated": "4.631",
	"docosenoic_acid": "0.114",
	"eicosenoic_acid": "0.3",
	"hexadecenoic_acid": "1.043",
	"octadecenoic_acid": "3.165",
	"polyunsaturated": "7.405",
	"DHA": "3.8",
	"DPA": "0.229",
	"EPA": "2.741",
	"eicosatetraenoic_acid": "0.5",
	"octadecadienoic_acid": "0.081",
	"octadecatetraenoic_acid": "0.033",
	"octadecatrienoic_acid": "0.017",
	"protein": "24.6",
	"alanine": "1.653",
	"arginine": "1.59",
	"aspartic_acid": "2.385",
	"cystine": "0.449",
	"glutamic_acid": "3.633",
	"glycine": "0.74",
	"histidine": "0.649",
	"isoleucine": "1.035",
	"leucine": "2.133",
	"lysine": "1.834",
	"methionine": "0.646",
	"phenylalanine": "2.039",
	"proline": "1.2",
	"serine": "1.897",
	"threonine": "1.263",
	"tryptophan": "0.323",
	"tyrosine": "0.968",
	"valine": "1.263",
	"vitamin_a": "0",
	"carotene_alpha": "0",
	"carotene_beta": "0",
	"cryptoxanthin_beta": "0",
	"lutein": "0",
	"lycopene": "0",
	"retinol": "0",
	"vitamin_b1": "0",
	"vitamin_b2": "0",
	"vitamin_b3": "0",
	"vitamin_b5": "0",
	"vitamin_b12": "0",
	"folate": "0",
	"vitamin_e": "0",
	"choline": "0.49",
	"calcium": "0.275",
	"copper": "0",
	"iron": "0.01188",
	"magnesium": "0.3",
	"manganese": "0",
	"phosphorus": "0.356",
	"potassium": "0.181",
	"selenium": "0",
	"sodium": "1.5",
	"zinc": "0"
}

nutritionData = {
	"energy": "264",
	"protein": "24.6",
	"fiber": "4",
	"sugars": "25",
}


searchValue = function (obj, key, value, path='', node = 0, nutritionData)  {

	if (!obj || (typeof obj != 'object')) {
		path = `${path}-${key}a`;
		return {"state" :false, "obj": {}, val: 0, "path": path, "location": "a"};
	}
	if (obj[key] === value) {
		// @ts-ignore
		if(!isNaN(key)) {
			path = `${path}-${key}d`;
		}
		return {"state" :true, "obj": obj[key], val: obj["value"],"key": key, "path": path, "location": "d"};
	}

	for (const k in obj) {
		if (obj.hasOwnProperty(k)) {
			// @ts-ignore
			if(!isNaN(k)) {
				if (Number(k) > Number(node)) {
					node = Number(k);
				} else {
					path = `${path}-${node}b`;
					node = 0;
				}
			}

			let res = searchValue(obj[k], key, value, path, node, nutritionData);
			// @ts-ignore
			if (res["state"] === true) {
				node = (node==0)?1:node;
				path = `${path}-${node}b`;
				let loc = res["path"];;
				if(res["location"] && res["location"].substr(res["location"].length-1, 1) != 'd') {
					loc = res["path"];
					if (res["obj"]["location"]  && res["obj"]["location"].substr(res["obj"]["location"].length-1, 1) != 'd') {
						loc = res["obj"]["path"];
						if (res["obj"]["obj"]["location"]  && res["obj"]["obj"]["location"].substr(res["obj"]["obj"]["location"].length-1, 1) != 'd') {
							loc = res["obj"]["obj"]["path"];
						}
					}
				}
				return {"state" :true, "obj": res, val: nutritionData[value], "key": k, "path": path,  "location": loc};
			}
		}
	}

	path = `${path}-${key}c`;
	return {"state" :false, "obj": obj[key], val: obj["value"], "key": key,"path": path,  "location": "x"};
}


function walkObject(obj, originalData, nutritionData, outputFields, outputValues) {
	const foodItemFrontmatterField = 'nutritional_information_per_100g';
	for (let key in obj) {
		if (obj.hasOwnProperty(key)) {

			// @ts-ignore
			if (obj && typeof obj[key] === "string") {

				// @ts-ignore
				let node = searchValue(originalData, key, obj[key], '', 0, nutritionData);

				let loc = node["location"];
				loc = (loc.length > 0)?loc:node["path"];

				loc = loc.substring(1, loc.length-1).split('b').join('');

				loc = loc.split('-').join('"]["');
				if(node["val"]) {
				outputFields.push(`["${foodItemFrontmatterField}"]["${loc}"]["name"]`);
				// @ts-ignore
				outputValues.push(obj[key]);
				outputFields.push(`["${foodItemFrontmatterField}"]["${loc}"]["amount"]`);

				outputValues.push(node["val"]);
				}

			}
			// @ts-ignore
			if (obj && typeof obj[key] === "object") {
				//console.log(obj[key])
				// @ts-ignore
				walkObject(obj[key], originalData, nutritionData, outputFields, outputValues);
			}
		}
	}
	return { "fields": outputFields, "values": outputValues}
}


let res = walkObject(nutritionalInformationFrontMatter, nutritionalInformationFrontMatter , nutritionData, [], []);

console.log(res)
